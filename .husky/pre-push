echo "ğŸ›¡ï¸  [Push Guard] Iniciando validaÃ§Ã£o do ecossistema antes do push..."

# 1. Backend Validation
echo "â˜• Verificando compilaÃ§Ã£o do Backend..."
cd backend && mvn clean compile -DskipTests
if [ $? -ne 0 ]; then
  echo "âŒ Erro de compilaÃ§Ã£o no Backend! Push cancelado."
  exit 1
fi
cd ..

# 2. Frontend Validation
echo "âš›ï¸ Verificando tipos do Frontend..."
cd frontend && npm run typecheck
if [ $? -ne 0 ]; then
  echo "âŒ Erro de tipagem no Frontend! Push cancelado."
  exit 1
fi
cd ..

# 3. Dashboard Validation
echo "ğŸ“Š Verificando tipos do Dashboard Admin..."
cd dashboard-admin && npm run typecheck
if [ $? -ne 0 ]; then
  echo "âŒ Erro de tipagem no Dashboard! Push cancelado."
  exit 1
fi
cd ..

echo "âœ… Ecossistema Ã­ntegro! Push liberado."
exit 0
